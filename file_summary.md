# Child Appendicitis ML Project - File Summary

This document provides a comprehensive summary of the output files and directories generated by the machine learning pipeline.

---

## Output Text Files (`*_output.txt`)

### 1. `preprocess_output.txt`
**Purpose:** Log of the data preprocessing pipeline execution.

**Key Information:**
- **Original Data:** 782 samples × 58 columns
- **All Features Dataset:** 780 samples × 78 features (after one-hot encoding)
- **No Ultrasound Dataset:** 780 samples × 45 features (excludes ultrasound features and `Length_of_Stay`)
- **Train/Test Split:** 624 training / 156 test samples (80/20 split, stratified by Diagnosis)
- **Missing Values:** 
  - All features: 36.84%
  - No ultrasound: 11.25%
- **Note:** 2 samples with missing Diagnosis were removed

### 2. `analysis_output.txt`
**Purpose:** Log of the exploratory data analysis execution.

**Key Information:**
- Runs analysis on both datasets (all features and no ultrasound)
- Generates 10 types of visualizations per dataset:
  1. Correlation heatmap
  2. Feature-target correlations
  3. Target distributions
  4. Box plots by diagnosis/severity/management
  5. Scatter matrix
  6. Top correlations bar chart
  7. Class balance pie charts
  8. Binary features analysis

### 3. `model_output.txt`
**Purpose:** Complete log of model training, evaluation, and hyperparameter tuning.

**Key Information:**
- **Targets:** Diagnosis, Management, Severity
- **Models Trained:** Logistic Regression, Random Forest, Gradient Boosting, HistGradientBoosting, SVM, KNN, Decision Tree
- **Feature Selection:** Forward (15 features) → Backward (10 features) stepwise selection
- **Best Models (Test F1-Score):**
  | Target | Best Model | Test Accuracy | Test F1 |
  |--------|------------|---------------|---------|
  | Diagnosis | HistGradientBoosting | 75.64% | 0.6984 |
  | Management | HistGradientBoosting | 88.46% | 0.8744 |
  | Severity | Random Forest | 89.10% | 0.9377 |

---

## Directory: `./analysis/`

Contains all visualization outputs (35 PNG files).

### Exploratory Data Analysis (by dataset)

| Plot Type | All Features | No Ultrasound |
|-----------|--------------|---------------|
| Correlation Heatmap | `correlation_heatmap_all_features.png` | `correlation_heatmap_no_ultrasound.png` |
| Feature-Target Correlations | `feature_target_correlations_all_features.png` | `feature_target_correlations_no_ultrasound.png` |
| Target Distributions | `target_distributions_all_features.png` | `target_distributions_no_ultrasound.png` |
| Features by Diagnosis | `features_by_diagnosis_all_features.png` | `features_by_diagnosis_no_ultrasound.png` |
| Features by Severity | `features_by_severity_all_features.png` | `features_by_severity_no_ultrasound.png` |
| Features by Management | `features_by_management_all_features.png` | `features_by_management_no_ultrasound.png` |
| Scatter Matrix | `scatter_matrix_all_features.png` | `scatter_matrix_no_ultrasound.png` |
| Top Correlations | `top_correlations_all_features.png` | `top_correlations_no_ultrasound.png` |
| Class Balance | `class_balance_all_features.png` | `class_balance_no_ultrasound.png` |
| Binary Features Analysis | `binary_features_analysis_all_features.png` | `binary_features_analysis_no_ultrasound.png` |

### Model Training Outputs (by target)

| Plot Type | Diagnosis | Management | Severity |
|-----------|-----------|------------|----------|
| ROC Curves (Full) | `roc_curves_Diagnosis.png` | `roc_curves_Management.png` | `roc_curves_Severity.png` |
| ROC Curves (Selected) | `roc_curves_Diagnosis_selected.png` | `roc_curves_Management_selected.png` | `roc_curves_Severity_selected.png` |
| Confusion Matrix | `confusion_matrix_Diagnosis.png` | `confusion_matrix_Management.png` | `confusion_matrix_Severity.png` |
| Feature Selection | `feature_selection_Diagnosis.png` | `feature_selection_Management.png` | `feature_selection_Severity.png` |
| Grid Search | `grid_search_Diagnosis.png` | `grid_search_Management.png` | `grid_search_Severity.png` |

---

## Directory: `./models/`

Contains model evaluation results (4 CSV files).

### 1. `model_results.csv`
**Content:** Complete performance metrics for all model-target combinations.

| Column | Description |
|--------|-------------|
| Target | Target variable (Diagnosis/Management/Severity, with `_selected` suffix for feature-selected models) |
| Model | Algorithm name |
| Train_Accuracy | Training set accuracy |
| Test_Accuracy | Test set accuracy |
| Train_F1 | Training F1-score |
| Test_F1 | Test F1-score |
| Train_AUC | Training AUC-ROC |
| Test_AUC | Test AUC-ROC |

**Records:** 42 rows (7 models × 3 targets × 2 feature sets)

### 2. `train_test_comparison.csv`
**Content:** Detailed train vs test comparison with overfitting detection.

Includes accuracy, F1-score, and AUC metrics with difference calculations and overfitting flags (threshold: 10% gap).

### 3. `grid_search_results.csv`
**Content:** Hyperparameter tuning results.

| Model | Parameter Tuned |
|-------|-----------------|
| Random Forest | n_estimators |
| KNN | n_neighbors |
| Gradient Boosting | n_estimators |
| SVM | C (regularization) |
| Decision Tree | max_depth |
| Logistic Regression | C (regularization) |

### 4. `feature_selection_results.csv`
**Content:** Selected features for each target.

| Target | Forward Features | Forward-Backward Features |
|--------|------------------|---------------------------|
| Diagnosis | 15 features | **10 features**: BMI, Sex, Lower_Right_Abd_Pain, Loss_of_Appetite, WBC_Count, RBC_Count, Ketones_in_Urine_+, Ketones_in_Urine_++, Peritonitis_generalized, Peritonitis_no |
| Management | 15 features | **10 features**: Age, BMI, Coughing_Pain, Ketones_in_Urine_++/+++/no, WBC_in_Urine_no, CRP, Peritonitis_no, Psoas_Sign |
| Severity | 15 features | **10 features**: BMI, Sex, Contralateral_Rebound_Tenderness, Nausea, Segmented_Neutrophils, Ketones_in_Urine_++/+++/no, RBC_in_Urine_+, CRP |

---

## Directory: `./processed_data/`

Contains preprocessed data arrays and metadata (16 files).

### Feature Matrices (`.npy` files)

| File | Shape | Description |
|------|-------|-------------|
| `X_all_features.npy` | (780, 78) | Full dataset with all features |
| `X_no_ultrasound.npy` | (780, 45) | Dataset without ultrasound & Length_of_Stay |
| `X_train_all_features.npy` | (624, 78) | Training set (all features) |
| `X_test_all_features.npy` | (156, 78) | Test set (all features) |
| `X_train_no_ultrasound.npy` | (624, 45) | Training set (no ultrasound) |
| `X_test_no_ultrasound.npy` | (156, 45) | Test set (no ultrasound) |

### Target Matrices (`.npy` files)

| File | Shape | Description |
|------|-------|-------------|
| `y_all_features.npy` | (780, 3) | Full targets (Diagnosis, Management, Severity) |
| `y_no_ultrasound.npy` | (780, 3) | Targets for no-ultrasound dataset |
| `y_train_*.npy` | (624, 3) | Training targets |
| `y_test_*.npy` | (156, 3) | Test targets |

### Metadata Files

| File | Description |
|------|-------------|
| `feature_names_all.npy` | Array of 78 feature names (all features) |
| `feature_names_no_ultrasound.npy` | Array of 45 feature names (no ultrasound) |
| `target_names.npy` | Array: ['Diagnosis', 'Management', 'Severity'] |
| `transformation_summary.txt` | Detailed preprocessing documentation |

### Key Notes from `transformation_summary.txt`
- **Missing Values:** Preserved as NaN (not imputed during preprocessing)
- **Encoding:** Binary variables → Label encoding; Multi-class → One-hot encoding
- **Excluded from No-Ultrasound:** 22 ultrasound columns + `Length_of_Stay` (leaky feature)
- **High Missing Rate Features:** Conglomerate_of_Bowel_Loops (94.5%), Segmented_Neutrophils (93.1%), Ileus (92.3%)

---

## Summary Statistics

| Metric | Value |
|--------|-------|
| Total Samples | 780 (after removing 2 with missing Diagnosis) |
| Training Samples | 624 (80%) |
| Test Samples | 156 (20%) |
| All Features Count | 78 |
| No Ultrasound Features Count | 45 |
| Models Evaluated | 7 |
| Target Variables | 3 (Diagnosis, Management, Severity) |
| Visualization Files | 35 |
| CSV Result Files | 4 |
